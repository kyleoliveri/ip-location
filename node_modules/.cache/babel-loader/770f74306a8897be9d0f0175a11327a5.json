{"ast":null,"code":"// @ is an alias to /src\nimport IPInfo from '../components/IPInfo.vue';\nimport leaflet from 'leaflet';\nimport { onMounted, ref } from 'vue';\nimport axios from 'axios';\nexport default {\n  name: 'HomeView',\n  components: {\n    IPInfo\n  },\n\n  setup() {\n    let mymap;\n    const queryIp = ref('');\n    const ipInfo = ref(null);\n    onMounted(() => {\n      mymap = leaflet.map('mymap').setView([37.77, -122.41], 9);\n      leaflet.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3lsZW9saXZlcmkiLCJhIjoiY2wxMXI5ajhkMDlqNjNkczNnc3QwdnZpZyJ9.nG-937jxmBbWEMJiVohU4w', {\n        attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        maxZoom: 18,\n        id: 'mapbox/streets-v11',\n        tileSize: 512,\n        zoomOffset: -1,\n        accessToken: 'pk.eyJ1Ijoia3lsZW9saXZlcmkiLCJhIjoiY2wxMXI5ajhkMDlqNjNkczNnc3QwdnZpZyJ9.nG-937jxmBbWEMJiVohU4w'\n      }).addTo(mymap);\n    });\n\n    const getIpInfo = async (req, res) => {\n      try {\n        const data = await axios.get(`https://geo.ipify.org/api/v2/country?apiKey=at_XS6PLyCrOPBgUsaKZdVjHkJLQGB3z&ipAddress=${queryIp.value}`);\n        const result = data.data;\n        ipInfo.value = {\n          address: result.ip,\n          state: result.location.region,\n          timezone: result.location.timezone,\n          isp: result.isp,\n          lat: result.location.lat,\n          lng: result.location.lng\n        };\n        leaflet.marker([ipInfo.value.lat, ipInfo.value.lng]).addTo(mymap);\n        mymap.setView([ipInfo.value.lat, ipInfo.value.lng], 13);\n      } catch (err) {\n        console.log(err);\n        res.send(err);\n      }\n    };\n\n    return {\n      queryIp,\n      ipInfo,\n      getIpInfo\n    };\n  }\n\n};","map":{"version":3,"mappings":"AA4BA;AACA,OAAOA,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,SAASC,SAAT,EAAoBC,GAApB,QAA+B,KAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,eAAe;AACbC,MAAI,EAAE,UADO;AAEbC,YAAU,EAAE;AAAEN;AAAF,GAFC;;AAGbO,OAAI,GAAK;AACP,QAAIC,KAAJ;AACA,UAAMC,OAAM,GAAIN,GAAG,CAAC,EAAD,CAAnB;AACA,UAAMO,MAAK,GAAIP,GAAG,CAAC,IAAD,CAAlB;AACAD,aAAS,CAAC,MAAM;AACdM,WAAI,GAAIP,OAAO,CAACU,GAAR,CAAY,OAAZ,EAAqBC,OAArB,CAA6B,CAAC,KAAD,EAAQ,CAAC,MAAT,CAA7B,EAA+C,CAA/C,CAAR;AAEAX,aAAO,CAACY,SAAR,CAAkB,qKAAlB,EAAyL;AACvLC,mBAAW,EAAE,0JAD0K;AAEvLC,eAAO,EAAE,EAF8K;AAGvLC,UAAE,EAAE,oBAHmL;AAIvLC,gBAAQ,EAAE,GAJ6K;AAKvLC,kBAAU,EAAE,CAAC,CAL0K;AAMvLC,mBAAW,EAAE;AAN0K,OAAzL,EAOGC,KAPH,CAOSZ,KAPT;AAQD,KAXQ,CAAT;;AAYA,UAAMa,SAAQ,GAAI,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACpC,UAAI;AACF,cAAMC,IAAG,GAAI,MAAMpB,KAAK,CAACqB,GAAN,CAAW,0FAAyFhB,OAAO,CAACiB,KAAM,EAAlH,CAAnB;AACA,cAAMC,MAAK,GAAIH,IAAI,CAACA,IAApB;AACAd,cAAM,CAACgB,KAAP,GAAe;AACbE,iBAAO,EAAED,MAAM,CAACE,EADH;AAEbC,eAAK,EAAEH,MAAM,CAACI,QAAP,CAAgBC,MAFV;AAGbC,kBAAQ,EAAEN,MAAM,CAACI,QAAP,CAAgBE,QAHb;AAIbC,aAAG,EAAEP,MAAM,CAACO,GAJC;AAKbC,aAAG,EAAER,MAAM,CAACI,QAAP,CAAgBI,GALR;AAMbC,aAAG,EAAET,MAAM,CAACI,QAAP,CAAgBK;AANR,SAAf;AAQAnC,eAAO,CAACoC,MAAR,CAAe,CAAC3B,MAAM,CAACgB,KAAP,CAAaS,GAAd,EAAmBzB,MAAM,CAACgB,KAAP,CAAaU,GAAhC,CAAf,EAAqDhB,KAArD,CAA2DZ,KAA3D;AACAA,aAAK,CAACI,OAAN,CAAc,CAACF,MAAM,CAACgB,KAAP,CAAaS,GAAd,EAAmBzB,MAAM,CAACgB,KAAP,CAAaU,GAAhC,CAAd,EAAoD,EAApD;AACF,OAbA,CAaE,OAAOE,GAAP,EAAY;AACZC,eAAO,CAACC,GAAR,CAAYF,GAAZ;AACAf,WAAG,CAACkB,IAAJ,CAASH,GAAT;AACF;AACF,KAlBA;;AAmBA,WAAO;AAAE7B,aAAF;AAAWC,YAAX;AAAmBW;AAAnB,KAAP;AACF;;AAvCa,CAAf","names":["IPInfo","leaflet","onMounted","ref","axios","name","components","setup","mymap","queryIp","ipInfo","map","setView","tileLayer","attribution","maxZoom","id","tileSize","zoomOffset","accessToken","addTo","getIpInfo","req","res","data","get","value","result","address","ip","state","location","region","timezone","isp","lat","lng","marker","err","console","log","send"],"sourceRoot":"","sources":["/Users/kyle/Documents/Dev/ip_tracker/app/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col h-screen max-h-screen\">\n    <!-- Search / Results -->\n    <div\n      class=\"z-20 flex justify-center relative bg-hero-pattern bg-cover px-4 pt-8 pb-32\"\n    >\n      <!-- Search Input -->\n      <div class=\"w-full max-w-screen-sm\">\n        <h1 class=\"text-white text-center text-3xl pb-4\">IP Address Tracker</h1>\n        <div class=\"flex\">\n          <input\n            v-model=\"queryIp\"\n            class=\"flex-1 py-3 px-2 rounded-tl-md rounded-bl-md focus:outline-none\"\n            type=\"text\"\n            placeholder=\"Search for any IP address or leave empty to get your IP info\"\n          />\n          <i @click=\"getIpInfo\" class=\"cursor-pointer bg-black text-white px-4 rounded-tr-md rounded-br-md flex items-center fa-solid fa-chevron-right\"></i>\n        </div>\n      </div>\n      <IPInfo v-if=\"ipInfo\" v-bind:ipInfo=\"ipInfo\" />\n    </div>\n\n    <!-- Map -->\n     <div id=\"map\" class=\"h-full z-10\"></div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport IPInfo from '../components/IPInfo.vue'\nimport leaflet from 'leaflet'\nimport { onMounted, ref } from 'vue'\nimport axios from 'axios'\nexport default {\n  name: 'HomeView',\n  components: { IPInfo },\n  setup () {\n    let mymap\n    const queryIp = ref('')\n    const ipInfo = ref(null)\n    onMounted(() => {\n      mymap = leaflet.map('mymap').setView([37.77, -122.41], 9)\n\n      leaflet.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3lsZW9saXZlcmkiLCJhIjoiY2wxMXI5ajhkMDlqNjNkczNnc3QwdnZpZyJ9.nG-937jxmBbWEMJiVohU4w', {\n        attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        maxZoom: 18,\n        id: 'mapbox/streets-v11',\n        tileSize: 512,\n        zoomOffset: -1,\n        accessToken: 'pk.eyJ1Ijoia3lsZW9saXZlcmkiLCJhIjoiY2wxMXI5ajhkMDlqNjNkczNnc3QwdnZpZyJ9.nG-937jxmBbWEMJiVohU4w'\n      }).addTo(mymap)\n    })\n    const getIpInfo = async (req, res) => {\n      try {\n        const data = await axios.get(`https://geo.ipify.org/api/v2/country?apiKey=at_XS6PLyCrOPBgUsaKZdVjHkJLQGB3z&ipAddress=${queryIp.value}`)\n        const result = data.data\n        ipInfo.value = {\n          address: result.ip,\n          state: result.location.region,\n          timezone: result.location.timezone,\n          isp: result.isp,\n          lat: result.location.lat,\n          lng: result.location.lng\n        }\n        leaflet.marker([ipInfo.value.lat, ipInfo.value.lng]).addTo(mymap)\n        mymap.setView([ipInfo.value.lat, ipInfo.value.lng], 13)\n      } catch (err) {\n        console.log(err)\n        res.send(err)\n      }\n    }\n    return { queryIp, ipInfo, getIpInfo }\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}